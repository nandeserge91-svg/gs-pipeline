# ðŸ”€ DIAGRAMMES DE FLUX - SystÃ¨me d'ExpÃ©dition
## ReprÃ©sentation visuelle complÃ¨te

---

## ðŸ“¦ FLUX EXPÃ‰DITION (Paiement 100%)

### Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUX COMPLET EXPÃ‰DITION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SITE WEB                    CMD-123 crÃ©Ã©e
   â”‚                        Status: NOUVELLE
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPELANT    â”‚  1. Appelle le client
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  2. Client confirme
       â”‚          3. Client PAIE 9900 F (100%)
       â”‚          4. Clic "ðŸ“¦ EXPÃ‰DITION"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExpeditionModal.tsx       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Mode paiement: â–¼    â”‚  â”‚
â”‚  â”‚ RÃ©fÃ©rence: [____]   â”‚  â”‚
â”‚  â”‚ Note: [________]    â”‚  â”‚
â”‚  â”‚ [Confirmer]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/expedition
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (order.routes.js)     â”‚
â”‚  âœ… VÃ©rifie paiement 100%      â”‚
â”‚  âœ… VÃ©rifie stock > 0          â”‚
â”‚  âœ… Stock normal -1 IMMÃ‰DIAT   â”‚
â”‚  âœ… CrÃ©e mouvement RESERVATION â”‚
â”‚  âœ… Status â†’ EXPEDITION        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ Commande mise Ã  jour
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE                       â”‚
â”‚  orders.status = EXPEDITION     â”‚
â”‚  orders.montantPaye = 9900      â”‚
â”‚  products.stockActuel = 49      â”‚
â”‚  stockMovements += 1 ligne      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GESTIONNAIRE    â”‚  1. Ouvre "ExpÃ©ditions & EXPRESS"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. Voit CMD-123 "Non assignÃ©"
       â”‚              3. Clic "Assigner livreur"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modal Assignation         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Livreur: â–¼          â”‚  â”‚
â”‚  â”‚   Kofi Mensah       â”‚  â”‚
â”‚  â”‚   91234567          â”‚  â”‚
â”‚  â”‚ [Assigner]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/expedition/assign
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                        â”‚
â”‚  âœ… VÃ©rifie status = EXPEDITION â”‚
â”‚  âœ… VÃ©rifie livreur actif       â”‚
â”‚  âœ… Status â†’ ASSIGNEE           â”‚
â”‚  âœ… delivererId = 5             â”‚
â”‚  âš ï¸ Stock INCHANGÃ‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GESTIONNAIRE STOCK    â”‚  1. Voit "âœ“ Kofi 91234567"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. PrÃ©pare colis stock normal
       â”‚                    3. Ã‰tiquette le colis
       â”‚                    4. Appelle Kofi
       â–¼                    5. Remet le colis
COLIS PRÃ‰PARÃ‰
       â”‚
       â”‚ âš ï¸ Aucune action systÃ¨me
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LIVREUR    â”‚  1. Ouvre "Mes expÃ©ditions"
â”‚   (Kofi)     â”‚  2. Voit CMD-123
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  3. RÃ©cupÃ¨re colis
       â”‚          4. Va Ã  agence transport
       â”‚          5. ExpÃ©die le colis
       â–¼          6. ReÃ§oit code + reÃ§u
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modal Confirmation        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Code: EXP-2024-001  â”‚  â”‚
â”‚  â”‚ Photo: [ðŸ“¸]        â”‚  â”‚
â”‚  â”‚ Note: [_______]    â”‚  â”‚
â”‚  â”‚ [Confirmer]        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/expedition/livrer
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                        â”‚
â”‚  âœ… VÃ©rifie status = ASSIGNEE   â”‚
â”‚  âœ… VÃ©rifie livreur = Kofi      â”‚
â”‚  âœ… Status â†’ LIVREE             â”‚
â”‚  âœ… codeExpedition enregistrÃ©   â”‚
â”‚  âœ… photoRecuExpedition         â”‚
â”‚  âš ï¸ Stock INCHANGÃ‰ (dÃ©jÃ  -1)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT                â”‚  ReÃ§oit le colis
â”‚  (Parakou)             â”‚  dans sa ville
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ FLUX EXPRESS (Paiement 10% + 90%)

### Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FLUX COMPLET EXPRESS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SITE WEB                    CMD-124 crÃ©Ã©e
   â”‚                        Status: NOUVELLE
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPELANT    â”‚  1. Appelle le client
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  2. Client confirme
       â”‚          3. Client PAIE 990 F (10%)
       â”‚          4. Clic "âš¡ EXPRESS"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ExpressModal.tsx          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Montant: 990 F      â”‚  â”‚
â”‚  â”‚ Mode: MTN â–¼         â”‚  â”‚
â”‚  â”‚ RÃ©fÃ©rence: [____]   â”‚  â”‚
â”‚  â”‚ Agence: Cotonou â–¼   â”‚  â”‚
â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚ â„¹ï¸ Reste: 8910 F    â”‚  â”‚
â”‚  â”‚ [Confirmer]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/express
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (order.routes.js)       â”‚
â”‚  âœ… VÃ©rifie paiement â‰¥ 10%       â”‚
â”‚  âœ… VÃ©rifie stock normal > 0     â”‚
â”‚  âœ… Stock normal -1              â”‚
â”‚  âœ… Stock EXPRESS +1             â”‚
â”‚  âœ… Mouvement RESERVATION_EXPRESSâ”‚
â”‚  âœ… Status â†’ EXPRESS             â”‚
â”‚  âœ… montantRestant = 8910        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE                       â”‚
â”‚  orders.status = EXPRESS        â”‚
â”‚  orders.montantPaye = 990       â”‚
â”‚  orders.montantRestant = 8910   â”‚
â”‚  orders.agenceRetrait = "Cot."  â”‚
â”‚  products.stockActuel = 48      â”‚
â”‚  products.stockExpress = 1      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GESTIONNAIRE STOCK    â”‚  1. Voit CMD-124 EXPRESS
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. PrÃ©pare colis stock EXPRESS
       â”‚                    3. Ã‰tiquette: "Agence Cotonou"
       â”‚                    4. ExpÃ©die vers agence
       â–¼
COLIS EN TRANSIT
       â”‚
       â”‚ (Transport vers agence)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENCE COTONOU  â”‚  Colis reÃ§u
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ Agence informe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GESTIONNAIRE    â”‚  1. Ouvre "ExpÃ©ditions & EXPRESS"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. Onglet "Express"
       â”‚              3. Clic "Marquer comme arrivÃ©"
       â–¼
       â”‚ PUT /api/orders/:id/express/arrive
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                        â”‚
â”‚  âœ… VÃ©rifie status = EXPRESS    â”‚
â”‚  âœ… Status â†’ EXPRESS_ARRIVE     â”‚
â”‚  âœ… arriveAt = maintenant       â”‚
â”‚  âš ï¸ Stock INCHANGÃ‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  APPELANT    â”‚  1. Voit "ðŸ“ ArrivÃ© en agence"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  2. Clic "Notifier le client"
       â”‚          3. Appelle le client:
       â”‚             "Votre colis est arrivÃ©"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modal Notification        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Client: Jean D.     â”‚  â”‚
â”‚  â”‚ TÃ©l: 97123456       â”‚  â”‚
â”‚  â”‚ Agence: Cotonou     â”‚  â”‚
â”‚  â”‚ Montant: 8910 F     â”‚  â”‚
â”‚  â”‚                      â”‚  â”‚
â”‚  â”‚ Note: [_______]     â”‚  â”‚
â”‚  â”‚ [Notifier]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/express/notifier
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                        â”‚
â”‚  âœ… clientNotifie = true        â”‚
â”‚  âœ… notifieAt = maintenant      â”‚
â”‚  âœ… CrÃ©e ExpressNotification    â”‚
â”‚  âš ï¸ Stock INCHANGÃ‰             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT            â”‚  Infos reÃ§ues
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  (WhatsApp/SMS)
       â”‚
       â”‚ (Client se dÃ©place)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AGENCE COTONOU  â”‚  1. Client arrive
â”‚  + CLIENT        â”‚  2. Client PAIE 8910 F
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  3. Client rÃ©cupÃ¨re colis
       â”‚
       â–¼ Agence informe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GESTIONNAIRE    â”‚  1. Ouvre "ExpÃ©ditions & EXPRESS"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  2. Clic "Finaliser (90%)"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modal Finalisation        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Montant: 8910 F     â”‚  â”‚
â”‚  â”‚ Mode: CASH â–¼        â”‚  â”‚
â”‚  â”‚ RÃ©fÃ©rence: [____]   â”‚  â”‚
â”‚  â”‚ Note: [_______]     â”‚  â”‚
â”‚  â”‚ [Finaliser]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ POST /api/orders/:id/express/finaliser
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND (Transaction Prisma)    â”‚
â”‚  âœ… VÃ©rifie status = EXPRESS_ARRIVEâ”‚
â”‚  âœ… Stock EXPRESS -1             â”‚
â”‚  âœ… Mouvement RETRAIT_EXPRESS    â”‚
â”‚  âœ… Status â†’ EXPRESS_LIVRE       â”‚
â”‚  âœ… montantPaye = 9900 (total)   â”‚
â”‚  âœ… montantRestant = 0           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE                       â”‚
â”‚  orders.status = EXPRESS_LIVRE  â”‚
â”‚  orders.montantPaye = 9900      â”‚
â”‚  orders.montantRestant = 0      â”‚
â”‚  products.stockExpress = 0      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… TRANSACTION COMPLÃˆTE
```

---

## ðŸ’¾ FLUX GESTION DU STOCK

### EXPÃ‰DITION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FLUX STOCK - EXPÃ‰DITION                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰tat Initial
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 50 â”‚
â”‚ Stock EXPRESS: 0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Appelant crÃ©e EXPÃ‰DITION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend (Transaction)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. VÃ©rifier stock > 0    â”‚  â”‚
â”‚  â”‚ 2. Stock normal -1       â”‚  â”‚
â”‚  â”‚ 3. CrÃ©er StockMovement   â”‚  â”‚
â”‚  â”‚    type: RESERVATION     â”‚  â”‚
â”‚  â”‚    quantite: -1          â”‚  â”‚
â”‚  â”‚    stockAvant: 50        â”‚  â”‚
â”‚  â”‚    stockApres: 49        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 49 â”‚ âœ… RÃ‰DUIT IMMÃ‰DIATEMENT
â”‚ Stock EXPRESS: 0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Gestionnaire assigne livreur
         â”‚ âš ï¸ PAS de changement
         â”‚
         â–¼ Livreur confirme expÃ©dition
         â”‚ âš ï¸ PAS de changement
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 49 â”‚ âœ… RESTE 49
â”‚ Stock EXPRESS: 0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FLUX STOCK - EXPRESS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ã‰tat Initial
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 49 â”‚
â”‚ Stock EXPRESS: 0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Appelant crÃ©e EXPRESS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend (Transaction)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. VÃ©rifier stock normal > 0 â”‚  â”‚
â”‚  â”‚ 2. Stock normal -1           â”‚  â”‚
â”‚  â”‚ 3. Stock EXPRESS +1          â”‚  â”‚
â”‚  â”‚ 4. CrÃ©er StockMovement       â”‚  â”‚
â”‚  â”‚    type: RESERVATION_EXPRESS â”‚  â”‚
â”‚  â”‚    quantite: -1 (normal)     â”‚  â”‚
â”‚  â”‚    quantite: +1 (express)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 48 â”‚ âœ… RÃ‰DUIT
â”‚ Stock EXPRESS: 1 â”‚ âœ… AUGMENTÃ‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Colis arrive en agence
         â”‚ âš ï¸ PAS de changement
         â”‚
         â–¼ Appelant notifie client
         â”‚ âš ï¸ PAS de changement
         â”‚
         â–¼ Client vient retirer
         â–¼ Admin finalise (90%)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend (Transaction)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. VÃ©rifier paiement 90%     â”‚  â”‚
â”‚  â”‚ 2. Stock EXPRESS -1          â”‚  â”‚
â”‚  â”‚ 3. CrÃ©er StockMovement       â”‚  â”‚
â”‚  â”‚    type: RETRAIT_EXPRESS     â”‚  â”‚
â”‚  â”‚    quantite: -1              â”‚  â”‚
â”‚  â”‚    stockAvant: 1             â”‚  â”‚
â”‚  â”‚    stockApres: 0             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 48 â”‚ âœ… INCHANGÃ‰
â”‚ Stock EXPRESS: 0 â”‚ âœ… RÃ‰DUIT
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ANNULATION EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       FLUX STOCK - ANNULATION EXPRESS           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Situation: Client ne vient PAS retirer

Ã‰tat Initial
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 48 â”‚
â”‚ Stock EXPRESS: 1 â”‚ â† Colis en agence
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Admin annule EXPRESS (30j sans retrait)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend (Transaction)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Stock EXPRESS -1          â”‚  â”‚
â”‚  â”‚ 2. Stock normal +1           â”‚  â”‚
â”‚  â”‚ 3. CrÃ©er StockMovement       â”‚  â”‚
â”‚  â”‚    type: ANNULATION_EXPRESS  â”‚  â”‚
â”‚  â”‚    quantite: +1 (normal)     â”‚  â”‚
â”‚  â”‚    quantite: -1 (express)    â”‚  â”‚
â”‚  â”‚ 4. Status â†’ ANNULEE          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stock Normal: 49 â”‚ âœ… RESTAURÃ‰
â”‚ Stock EXPRESS: 0 â”‚ âœ… RÃ‰DUIT
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ FLUX AUTORISATIONS PAR RÃ”LE

### Matrix des Actions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AUTORISATIONS PAR RÃ”LE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACTION                     â”‚ ADMIN â”‚ GEST. â”‚ APPEL. â”‚ G.STOCK â”‚ LIV.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€
CrÃ©er EXPÃ‰DITION           â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âŒ    â”‚  âŒ
CrÃ©er EXPRESS              â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âŒ    â”‚  âŒ
                           â”‚       â”‚       â”‚        â”‚         â”‚
Voir toutes expÃ©ditions    â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âœ…    â”‚  âŒ
Assigner livreur EXPEDITIONâ”‚  âœ…   â”‚  âœ…   â”‚  âŒ    â”‚   âŒ    â”‚  âŒ
                           â”‚       â”‚       â”‚        â”‚         â”‚
Marquer EXPRESS arrivÃ©     â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âŒ    â”‚  âŒ
Notifier client EXPRESS    â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âŒ    â”‚  âŒ
Finaliser EXPRESS (90%)    â”‚  âœ…   â”‚  âœ…   â”‚  âœ…    â”‚   âŒ    â”‚  âŒ
                           â”‚       â”‚       â”‚        â”‚         â”‚
Confirmer expÃ©dition       â”‚  âœ…   â”‚  âŒ   â”‚  âŒ    â”‚   âŒ    â”‚  âœ…
Voir ses expÃ©ditions       â”‚  âœ…   â”‚  âŒ   â”‚  âŒ    â”‚   âŒ    â”‚  âœ…
```

### Flux Permissions EXPÃ‰DITION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    FLUX PERMISSIONS - EXPÃ‰DITION                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 1: CrÃ©ation
â”œâ”€> Appelant   âœ… Peut crÃ©er
â”œâ”€> Gestionnaire âœ… Peut crÃ©er
â”œâ”€> Admin      âœ… Peut crÃ©er
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS

PHASE 2: Assignation Livreur
â”œâ”€> Admin      âœ… SEUL autorisÃ©
â”œâ”€> Gestionnaire âœ… SEUL autorisÃ©
â”œâ”€> Appelant   âŒ NE PEUT PAS â­ IMPORTANT
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS

PHASE 3: PrÃ©paration Colis
â”œâ”€> G.Stock    âœ… Peut voir (lecture)
â”œâ”€> Tous       âœ… Peuvent voir
â””â”€> Aucune action systÃ¨me

PHASE 4: Confirmation ExpÃ©dition
â”œâ”€> Livreur    âœ… SEUL autorisÃ© (ses expÃ©ditions)
â”œâ”€> Admin      âœ… Peut confirmer (toutes)
â”œâ”€> Gestionnaire âŒ NE PEUT PAS
â”œâ”€> Appelant   âŒ NE PEUT PAS
â””â”€> G.Stock    âŒ NE PEUT PAS
```

### Flux Permissions EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      FLUX PERMISSIONS - EXPRESS                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PHASE 1: CrÃ©ation
â”œâ”€> Appelant   âœ… Peut crÃ©er
â”œâ”€> Gestionnaire âœ… Peut crÃ©er
â”œâ”€> Admin      âœ… Peut crÃ©er
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS

PHASE 3: Marquer ArrivÃ©
â”œâ”€> Admin      âœ… Peut marquer
â”œâ”€> Gestionnaire âœ… Peut marquer
â”œâ”€> Appelant   âœ… Peut marquer
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS

PHASE 4: Notification Client
â”œâ”€> Appelant   âœ… Peut notifier
â”œâ”€> Gestionnaire âœ… Peut notifier
â”œâ”€> Admin      âœ… Peut notifier
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS

PHASE 6: Finalisation (90%)
â”œâ”€> Admin      âœ… Peut finaliser
â”œâ”€> Gestionnaire âœ… Peut finaliser
â”œâ”€> Appelant   âœ… Peut finaliser
â”œâ”€> G.Stock    âŒ NE PEUT PAS
â””â”€> Livreur    âŒ NE PEUT PAS
```

---

## ðŸ” FLUX AUTHENTIFICATION & SÃ‰CURITÃ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         FLUX AUTHENTIFICATION JWT               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT (Browser)
       â”‚
       â–¼ POST /api/auth/login
       â”‚ Body: { email, password }
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND              â”‚
â”‚  auth.routes.js       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Find user    â”‚  â”‚
â”‚  â”‚ 2. Verify pass  â”‚  â”‚
â”‚  â”‚ 3. Generate JWT â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼ Response 200
       â”‚ { token: "eyJhbGc...", user: {...} }
       â”‚
CLIENT (Browser)
       â”‚
       â”œâ”€> Store token in localStorage
       â”‚   localStorage.setItem('token', token)
       â”‚
       â”œâ”€> Store user in Zustand store
       â”‚   authStore.setState({ user, token })
       â”‚
       â–¼
SUBSEQUENT REQUESTS
       â”‚
       â–¼ Any API call (ex: POST /api/orders/:id/expedition)
       â”‚ Headers: { Authorization: "Bearer eyJhbGc..." }
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                  â”‚
â”‚  auth.middleware.js       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ authenticate()      â”‚  â”‚
â”‚  â”‚ 1. Extract token    â”‚  â”‚
â”‚  â”‚ 2. Verify JWT       â”‚  â”‚
â”‚  â”‚ 3. Find user        â”‚  â”‚
â”‚  â”‚ 4. req.user = user  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ authorize(roles)    â”‚  â”‚
â”‚  â”‚ 1. Check user.role  â”‚  â”‚
â”‚  â”‚ 2. Verify in roles  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ Access Granted âœ…
       Route Handler
       (ex: createExpedition)
```

---

## ðŸ“¡ FLUX API ENDPOINTS

### Architecture API

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ARCHITECTURE API                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT (Frontend React)
   â”‚
   â”œâ”€> api.ts (Axios Client)
   â”‚   - createExpedition(orderId, data)
   â”‚   - createExpress(orderId, data)
   â”‚   - assignExpeditionDeliverer(...)
   â”‚   - markExpressArrived(orderId)
   â”‚   - notifyExpressClient(orderId)
   â”‚   - finalizeExpress(orderId, data)
   â”‚
   â–¼ HTTPS/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RAILWAY (Backend)               â”‚
â”‚  server.js                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Express App                â”‚  â”‚
â”‚  â”‚ â”œâ”€> CORS Middleware        â”‚  â”‚
â”‚  â”‚ â”œâ”€> JSON Parser (10MB)     â”‚  â”‚
â”‚  â”‚ â””â”€> Routes:                â”‚  â”‚
â”‚  â”‚     /api/auth              â”‚  â”‚
â”‚  â”‚     /api/orders            â”‚  â”‚ â† ExpÃ©ditions
â”‚  â”‚     /api/express           â”‚  â”‚ â† EXPRESS agence
â”‚  â”‚     /api/delivery          â”‚  â”‚
â”‚  â”‚     /api/stock             â”‚  â”‚
â”‚  â”‚     /api/stats             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â”‚
â”‚  Routes per file:                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ order.routes.js            â”‚  â”‚
â”‚  â”‚ â”œâ”€> authenticate()         â”‚  â”‚ (Middleware)
â”‚  â”‚ â”œâ”€> authorize(...)         â”‚  â”‚ (Middleware)
â”‚  â”‚ â”œâ”€> POST /:id/expedition   â”‚  â”‚
â”‚  â”‚ â”œâ”€> POST /:id/expedition/  â”‚  â”‚
â”‚  â”‚ â”‚        assign             â”‚  â”‚
â”‚  â”‚ â”œâ”€> POST /:id/expedition/  â”‚  â”‚
â”‚  â”‚ â”‚        livrer             â”‚  â”‚
â”‚  â”‚ â”œâ”€> POST /:id/express      â”‚  â”‚
â”‚  â”‚ â”œâ”€> PUT /:id/express/arriveâ”‚  â”‚
â”‚  â”‚ â”œâ”€> POST /:id/express/     â”‚  â”‚
â”‚  â”‚ â”‚        notifier           â”‚  â”‚
â”‚  â”‚ â””â”€> POST /:id/express/     â”‚  â”‚
â”‚  â”‚          finaliser          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ Prisma Client
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  POSTGRESQL (Database)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Tables:                    â”‚  â”‚
â”‚  â”‚ - users                    â”‚  â”‚
â”‚  â”‚ - orders                   â”‚  â”‚
â”‚  â”‚ - products                 â”‚  â”‚
â”‚  â”‚ - stockMovements           â”‚  â”‚
â”‚  â”‚ - statusHistory            â”‚  â”‚
â”‚  â”‚ - expressNotifications     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¨ FLUX INTERFACE UTILISATEUR

### Navigation Globale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          NAVIGATION PAR RÃ”LE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LOGIN (Login.tsx)
   â”‚
   â–¼ Authentification rÃ©ussie
   â”‚
â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layout.tsx           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ HEADER           â”‚ â”‚
â”‚ â”‚ - Logo           â”‚ â”‚
â”‚ â”‚ - User menu      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ SIDEBAR (Menu)   â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Si APPELANT]    â”‚ â”‚
â”‚ â”‚ - Ã€ appeler      â”‚ â”‚ â† Orders.tsx (crÃ©er EXPEDITION/EXPRESS)
â”‚ â”‚ - Mes commandes  â”‚ â”‚
â”‚ â”‚ - Statistiques   â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Si GESTIONNAIRE]â”‚ â”‚
â”‚ â”‚ - Dashboard      â”‚ â”‚
â”‚ â”‚ - ExpÃ©ditions &  â”‚ â”‚ â† ExpeditionsExpress.tsx â­
â”‚ â”‚   EXPRESS        â”‚ â”‚
â”‚ â”‚ - Commandes      â”‚ â”‚
â”‚ â”‚ - Livraisons     â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Si G.STOCK]     â”‚ â”‚
â”‚ â”‚ - Stock          â”‚ â”‚
â”‚ â”‚ - ExpÃ©ditions &  â”‚ â”‚ â† ExpeditionsExpress.tsx (lecture)
â”‚ â”‚   EXPRESS        â”‚ â”‚
â”‚ â”‚ - TournÃ©es       â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Si LIVREUR]     â”‚ â”‚
â”‚ â”‚ - Mes livraisons â”‚ â”‚
â”‚ â”‚ - Mes expÃ©ditionsâ”‚ â”‚ â† Expeditions.tsx â­
â”‚ â”‚ - Statistiques   â”‚ â”‚
â”‚ â”‚                  â”‚ â”‚
â”‚ â”‚ [Si ADMIN]       â”‚ â”‚
â”‚ â”‚ - Tout â†‘         â”‚ â”‚
â”‚ â”‚ - Utilisateurs   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ CONTENT (Page)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Flux Page Appelant

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       FLUX PAGE APPELANT (Orders.tsx)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Appelant ouvre "Ã€ appeler"
   â”‚
   â–¼ GET /api/orders?status=A_APPELER
   â”‚
â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tableau des commandes    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ CMD-123 â”‚ Client    â”‚ â”‚
â”‚ â”‚         â”‚ [Traiter] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â–¼ Clic "Traiter"
   â”‚
â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal Traitement             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Infos client affichÃ©es  â”‚ â”‚
â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ Boutons d'action:       â”‚ â”‚
â”‚ â”‚ [âœ“ ValidÃ©e locale]      â”‚ â”‚ â†’ Status VALIDEE
â”‚ â”‚                          â”‚ â”‚
â”‚ â”‚ Pour villes Ã©loignÃ©es:  â”‚ â”‚
â”‚ â”‚ [ðŸ“¦ EXPÃ‰DITION 100%]    â”‚ â”‚ â”€â”
â”‚ â”‚ [âš¡ EXPRESS 10%]        â”‚ â”‚  â”‚
â”‚ â”‚                          â”‚ â”‚  â”‚
â”‚ â”‚ [ðŸ“µ Injoignable]        â”‚ â”‚  â”‚
â”‚ â”‚ [âœ• AnnulÃ©e]            â”‚ â”‚  â”‚
â”‚ â”‚ [â³ Attente paiement]   â”‚ â”‚  â”‚
â”‚ â”‚ [ðŸ“… RDV]               â”‚ â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€> Clic "ðŸ“¦ EXPÃ‰DITION"
   â”‚   â”‚
   â”‚   â–¼
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚ ExpeditionModal.tsx      â”‚
   â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  â”‚ â”‚ Mode paiement â–¼     â”‚ â”‚
   â”‚  â”‚ â”‚ RÃ©fÃ©rence [______]  â”‚ â”‚
   â”‚  â”‚ â”‚ Note [__________]   â”‚ â”‚
   â”‚  â”‚ â”‚ [Confirmer]         â”‚ â”‚
   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚             â”‚
   â”‚             â–¼ POST /api/orders/:id/expedition
   â”‚             â”‚
   â”‚             â–¼ Success â†’ Commande mise Ã  jour
   â”‚             â”‚
   â”‚             â–¼ Modal se ferme
   â”‚             â”‚
   â”‚             â–¼ Liste rafraÃ®chie
   â”‚
   â””â”€> Clic "âš¡ EXPRESS"
       â”‚
       â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ ExpressModal.tsx         â”‚
      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
      â”‚ â”‚ Montant [990_____]  â”‚ â”‚
      â”‚ â”‚ Mode paiement â–¼     â”‚ â”‚
      â”‚ â”‚ RÃ©fÃ©rence [______]  â”‚ â”‚
      â”‚ â”‚ Agence â–¼            â”‚ â”‚
      â”‚ â”‚ Note [__________]   â”‚ â”‚
      â”‚ â”‚                      â”‚ â”‚
      â”‚ â”‚ Reste: 8910 F       â”‚ â”‚
      â”‚ â”‚ [Confirmer]         â”‚ â”‚
      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼ POST /api/orders/:id/express
                 â”‚
                 â–¼ Success â†’ Commande mise Ã  jour
                 â”‚
                 â–¼ Modal se ferme
                 â”‚
                 â–¼ Liste rafraÃ®chie
```

---

## ðŸ” RÃ‰SUMÃ‰ VISUEL

### Points de DÃ©cision Critiques

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       POINTS DE DÃ‰CISION IMPORTANTS             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â“ Client dans ville Ã©loignÃ©e ?
   â”œâ”€> NON â†’ Livraison LOCAL (workflow normal)
   â””â”€> OUI â†’ â“ Client peut payer 100% maintenant ?
              â”œâ”€> OUI â†’ ðŸ“¦ EXPÃ‰DITION
              â”‚         âœ… Stock -1 immÃ©diat
              â”‚         âœ… Gestionnaire assigne livreur
              â”‚         âœ… Livreur expÃ©die
              â”‚
              â””â”€> NON â†’ âš¡ EXPRESS
                        âœ… Client paie â‰¥ 10%
                        âœ… Stock normal â†’ EXPRESS
                        âœ… Colis vers agence
                        âœ… Client paie 90% au retrait

â“ Qui peut assigner un livreur ?
   â”œâ”€> ADMIN âœ…
   â”œâ”€> GESTIONNAIRE âœ…
   â”œâ”€> APPELANT âŒ (NE PEUT PAS)
   â”œâ”€> G.STOCK âŒ
   â””â”€> LIVREUR âŒ

â“ Quand le stock est-il rÃ©duit ?
   â”œâ”€> EXPÃ‰DITION: Ã€ la crÃ©ation (Phase 1) âœ…
   â””â”€> EXPRESS:
       â”œâ”€> Stock normal: Ã€ la crÃ©ation (Phase 1) âœ…
       â””â”€> Stock EXPRESS: Ã€ la finalisation (Phase 6) âœ…

â“ Qui peut confirmer une expÃ©dition ?
   â”œâ”€> LIVREUR âœ… (ses expÃ©ditions uniquement)
   â””â”€> ADMIN âœ… (toutes)
```

---

**DIAGRAMMES COMPLETS - SYSTÃˆME D'EXPÃ‰DITION ðŸš€**

*Document crÃ©Ã© le 21 dÃ©cembre 2024*


