# ğŸ“Š DIAGRAMMES ET FLUX - SYSTÃˆME D'EXPÃ‰DITION

## ğŸ¯ ARCHITECTURE GLOBALE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SYSTÃˆME GS PIPELINE                              â”‚
â”‚                    Gestion des ExpÃ©ditions & Express                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT     â”‚      â”‚ FORMULAIRE   â”‚      â”‚   WEBHOOK    â”‚
â”‚   (Site Web) â”‚â”€â”€â”€â”€â”€>â”‚   COMMANDE   â”‚â”€â”€â”€â”€â”€>â”‚    MAKE      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚   BACKEND     â”‚
                                            â”‚   Node.js     â”‚
                                            â”‚   + Prisma    â”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                           â”‚                           â”‚
                        â–¼                           â–¼                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   APPELANT    â”‚         â”‚  GESTIONNAIRE â”‚         â”‚    LIVREUR    â”‚
                â”‚   Interface   â”‚         â”‚   Interface   â”‚         â”‚   Interface   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚                           â”‚                           â”‚
                        â–¼                           â–¼                           â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ - CrÃ©er EXP   â”‚         â”‚ - Assigner    â”‚         â”‚ - Confirmer   â”‚
                â”‚ - CrÃ©er EXPRESSâ”‚        â”‚   livreur     â”‚         â”‚   expÃ©dition  â”‚
                â”‚ - Notifier    â”‚         â”‚ - Marquer     â”‚         â”‚ - Uploader    â”‚
                â”‚   client      â”‚         â”‚   arrivÃ©      â”‚         â”‚   photo reÃ§u  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ WORKFLOW EXPÃ‰DITION (Paiement 100%)

### Diagramme de SÃ©quence

```
CLIENT    APPELANT    BACKEND    STOCK    GESTIONNAIRE    LIVREUR    AGENCE
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚ Commande  â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚ Appel    â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚ "OK, je   â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚  paie"    â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚ POST     â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚ /expedition        â”‚           â”‚            â”‚          â”‚
  â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ VÃ©rifie â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ Stock   â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ Stock OKâ”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ Stock-1 â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ Status: â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ EXPEDITION          â”‚            â”‚          â”‚
  â”‚           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚ "EXP     â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚  crÃ©Ã©e"  â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚   Assignerâ”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚   Livreur â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ POST      â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ /assign   â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
  â”‚           â”‚          â”‚ Status: â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ ASSIGNEEâ”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ PrÃ©pare   â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ Colis     â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ Remet     â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚ Colis     â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚  ExpÃ©die   â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚  Colis     â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚  POST      â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚  /livrer   â”‚          â”‚
  â”‚           â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
  â”‚           â”‚          â”‚ Status: â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ LIVREE  â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ +Code   â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚ +Photo  â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚           â”‚          â”‚         â”‚           â”‚            â”‚ Livre    â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ReÃ§oit    â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
  â”‚ Colis     â”‚          â”‚         â”‚           â”‚            â”‚          â”‚
```

### Statuts et Transitions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NOUVELLE   â”‚  Commande reÃ§ue du site
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A_APPELER   â”‚  En attente d'appel appelant
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Appelant appelle + Client paie 100%
       â”‚ POST /api/orders/:id/expedition
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXPEDITION  â”‚  Paiement 100% effectuÃ©
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  Stock -1 immÃ©diat
       â”‚
       â”‚ Gestionnaire assigne livreur
       â”‚ POST /api/orders/:id/expedition/assign
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ASSIGNEE   â”‚  Livreur assignÃ©
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  Colis prÃ©parÃ© par stock
       â”‚
       â”‚ Livreur expÃ©die
       â”‚ POST /api/orders/:id/expedition/livrer
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LIVREE    â”‚  Colis expÃ©diÃ©
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  +Code +Photo (optionnel)
```

---

## âš¡ WORKFLOW EXPRESS (Paiement 10% + 90%)

### Diagramme de SÃ©quence

```
CLIENT   APPELANT   BACKEND   STOCK    GESTIONNAIRE   AGENCE
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ Commandeâ”‚          â”‚        â”‚            â”‚            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚ Appel    â”‚        â”‚            â”‚            â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚        â”‚            â”‚            â”‚
  â”‚ "OK,    â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚  10%"   â”‚          â”‚        â”‚            â”‚            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚ POST     â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚ /express â”‚        â”‚            â”‚            â”‚
  â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ Normal â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ -1     â”‚            â”‚            â”‚
  â”‚         â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ EXPRESSâ”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ +1     â”‚            â”‚            â”‚
  â”‚         â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ Status:â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ EXPRESSâ”‚            â”‚            â”‚
  â”‚         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚ PrÃ©pare    â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚ Colis      â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚ ExpÃ©die    â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚ vers agenceâ”‚            â”‚
  â”‚         â”‚          â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ Colis      â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ Arrive     â”‚
  â”‚         â”‚          â”‚        â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ PUT        â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ /arrive    â”‚
  â”‚         â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
  â”‚         â”‚          â”‚ Status:â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ EXPRESS_ARRIVE      â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚ Notifie  â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚ Client   â”‚        â”‚            â”‚            â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¤ POST     â”‚        â”‚            â”‚            â”‚
  â”‚ "Colis  â”‚ /notifierâ”‚        â”‚            â”‚            â”‚
  â”‚ arrivÃ©" â”‚         â”‚        â”‚            â”‚            â”‚
  â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚        â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ clientNotifie      â”‚            â”‚
  â”‚         â”‚          â”‚ = true â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ Va en   â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ agence  â”‚          â”‚        â”‚            â”‚            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ Paie    â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ 90%     â”‚          â”‚        â”‚            â”‚            â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ POST       â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚ /finaliser â”‚
  â”‚         â”‚          â”‚<â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚         â”‚          â”‚ EXPRESSâ”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ -1     â”‚            â”‚            â”‚
  â”‚         â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€>â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ Status:â”‚            â”‚            â”‚
  â”‚         â”‚          â”‚ EXPRESS_LIVRE       â”‚            â”‚
  â”‚         â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ ReÃ§oit  â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚ Colis   â”‚          â”‚        â”‚            â”‚            â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

### Statuts et Transitions EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NOUVELLE   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A_APPELER   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Appelant + Client paie â‰¥10%
       â”‚ POST /api/orders/:id/express
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EXPRESS    â”‚  Stock normal -1, Stock EXPRESS +1
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  Montant payÃ©: 10%, Reste: 90%
       â”‚
       â”‚ Colis arrive en agence
       â”‚ PUT /api/orders/:id/express/arrive
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXPRESS_     â”‚  Agence notifie l'arrivÃ©e
â”‚  ARRIVE      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Appelant notifie client
       â”‚ POST /api/orders/:id/express/notifier
       â”‚ (clientNotifie = true)
       â”‚
       â”‚ Client vient + paie 90%
       â”‚ POST /api/orders/:id/express/finaliser
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXPRESS_     â”‚  Stock EXPRESS -1
â”‚  LIVRE       â”‚  Montant total payÃ©
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ FLUX DE GESTION DU STOCK

### Vue d'ensemble

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GESTION DU STOCK                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚  STOCK NORMAL    â”‚  Stock disponible
                 â”‚                  â”‚  pour vente
                 â”‚    50 unitÃ©s     â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚                â”‚
         â–¼                â–¼                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚LIVRAISONâ”‚    â”‚EXPEDITIONâ”‚    â”‚ EXPRESS  â”‚
   â”‚ LOCALE  â”‚    â”‚          â”‚    â”‚          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚                â”‚
         â”‚                â”‚                â–¼
         â”‚                â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                â”‚        â”‚STOCK EXPRESS â”‚
         â”‚                â”‚        â”‚              â”‚
         â”‚                â”‚        â”‚   5 unitÃ©s   â”‚
         â”‚                â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚               â”‚
         â–¼                â–¼               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚     Stock rÃ©duit aprÃ¨s livraison        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mouvements de Stock DÃ©taillÃ©s

#### EXPÃ‰DITION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat Initial       â”‚
â”‚ Stock Normal: 50   â”‚
â”‚ Stock EXPRESS: 0   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ CLIENT 1: CrÃ©e EXPÃ‰DITION
       â”‚ POST /api/orders/:id/expedition
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mouvement:         â”‚
â”‚ Type: RESERVATION  â”‚
â”‚ QuantitÃ©: -1       â”‚
â”‚ Stock Avant: 50    â”‚
â”‚ Stock AprÃ¨s: 49    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat AprÃ¨s         â”‚
â”‚ Stock Normal: 49   â”‚  âœ… RÃ©duit IMMÃ‰DIATEMENT
â”‚ Stock EXPRESS: 0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

... Livreur expÃ©die ...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirmation       â”‚
â”‚ POST /livrer       â”‚
â”‚ â†’ PAS de mouvement â”‚  âš ï¸ Stock dÃ©jÃ  rÃ©duit
â”‚   stock            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat Initial       â”‚
â”‚ Stock Normal: 50   â”‚
â”‚ Stock EXPRESS: 0   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ CLIENT 1: CrÃ©e EXPRESS (paie 10%)
       â”‚ POST /api/orders/:id/express
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mouvement:              â”‚
â”‚ Type: RESERVATION_      â”‚
â”‚       EXPRESS           â”‚
â”‚ Normal: -1              â”‚
â”‚ EXPRESS: +1             â”‚
â”‚ Stock Avant: 50 / 0     â”‚
â”‚ Stock AprÃ¨s: 49 / 1     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat AprÃ¨s         â”‚
â”‚ Stock Normal: 49   â”‚  âœ… TransfÃ©rÃ© vers EXPRESS
â”‚ Stock EXPRESS: 1   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ ... Colis arrive ...
       â”‚ ... Appelant notifie ...
       â”‚ ... Client vient + paie 90% ...
       â”‚
       â”‚ POST /api/orders/:id/express/finaliser
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mouvement:              â”‚
â”‚ Type: RETRAIT_EXPRESS   â”‚
â”‚ EXPRESS: -1             â”‚
â”‚ Stock Avant: 49 / 1     â”‚
â”‚ Stock AprÃ¨s: 49 / 0     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã‰tat Final         â”‚
â”‚ Stock Normal: 49   â”‚  âœ… EXPRESS rÃ©duit
â”‚ Stock EXPRESS: 0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¥ INTERACTIONS PAR RÃ”LE

### Appelant

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           INTERFACE APPELANT              â”‚
â”‚         Page: Ã€ appeler                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VALIDEE   â”‚ â”‚EXPEDITIONâ”‚ â”‚ EXPRESS  â”‚
â”‚   (Locale)  â”‚ â”‚          â”‚ â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
   Gestionnaire  Gestionnaire  Suit le
   assigne      assigne       colis jusqu'Ã 
   livreur      livreur       notification
```

**Actions Disponibles :**
- âœ… CrÃ©er EXPÃ‰DITION
- âœ… CrÃ©er EXPRESS
- âŒ Assigner livreur (rÃ©servÃ© au gestionnaire)
- âœ… Marquer EXPRESS arrivÃ©
- âœ… Notifier client EXPRESS
- âœ… Finaliser EXPRESS (90%)

### Gestionnaire

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        INTERFACE GESTIONNAIRE             â”‚
â”‚    Page: ExpÃ©ditions & EXPRESS            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Assigner   â”‚ â”‚  Marquer â”‚ â”‚Finaliser â”‚
â”‚  Livreur    â”‚ â”‚  ArrivÃ©  â”‚ â”‚ EXPRESS  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
   Livreur      Appelant    Client
   prend        notifie     paie 90%
   colis        client
```

**Actions Disponibles :**
- âœ… Voir toutes les expÃ©ditions
- âœ… **Assigner livreur** â­
- âœ… Marquer EXPRESS arrivÃ©
- âœ… Notifier client EXPRESS
- âœ… Finaliser EXPRESS (90%)

### Gestionnaire de Stock

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     INTERFACE GESTIONNAIRE STOCK          â”‚
â”‚    Page: ExpÃ©ditions & EXPRESS            â”‚
â”‚           (Lecture seule)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  VUE TOUTES LES       â”‚
        â”‚  EXPÃ‰DITIONS          â”‚
        â”‚                       â”‚
        â”‚  - RÃ©fÃ©rence          â”‚
        â”‚  - Client             â”‚
        â”‚  - Produit            â”‚
        â”‚  - Livreur assignÃ© âœ… â”‚
        â”‚  - Badge "PrÃ©parer"   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
            PrÃ©pare le colis
            et remet au livreur
```

**Actions Disponibles :**
- âœ… Voir expÃ©ditions
- âœ… Voir livreur assignÃ©
- âŒ Aucune action systÃ¨me

### Livreur

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         INTERFACE LIVREUR                 â”‚
â”‚        Page: Dashboard                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Livraisons  â”‚ â”‚EXPÃ‰DITIONSâ”‚â”‚ EXPRESS  â”‚
â”‚  Locales    â”‚ â”‚           â”‚â”‚ assignÃ©esâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚           â”‚
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
   Confirme     ExpÃ©die +     ExpÃ©die
   livraison    Code + Photo  vers agence
```

**Actions Disponibles :**
- âœ… Voir ses expÃ©ditions assignÃ©es
- âœ… Confirmer expÃ©dition
- âœ… Ajouter code d'expÃ©dition
- âœ… Uploader photo reÃ§u

---

## ğŸ”„ CYCLE DE VIE COMPLET D'UNE COMMANDE

### Timeline EXPÃ‰DITION

```
Jour 1 - 10h00
  â”‚ CLIENT commande sur le site
  â”‚ Status: NOUVELLE
  â”‚
Jour 1 - 14h00
  â”‚ APPELANT appelle
  â”‚ Client confirme + paie 100% (Orange Money)
  â”‚ APPELANT crÃ©e EXPÃ‰DITION
  â”‚ Status: EXPEDITION
  â”‚ Stock: 50 â†’ 49
  â”‚
Jour 1 - 15h00
  â”‚ GESTIONNAIRE assigne livreur Kofi
  â”‚ Status: ASSIGNEE
  â”‚
Jour 1 - 16h00
  â”‚ GESTIONNAIRE STOCK prÃ©pare colis
  â”‚ Remet Ã  Kofi
  â”‚
Jour 2 - 09h00
  â”‚ LIVREUR Kofi va Ã  l'agence DHL
  â”‚ ExpÃ©die vers Parakou
  â”‚ Code: EXP-2024-12345
  â”‚ Photo reÃ§u uploadÃ©e
  â”‚ Status: LIVREE
  â”‚
Jour 3 - 16h00
  â”‚ CLIENT reÃ§oit le colis Ã  Parakou
  â”‚ âœ… Transaction terminÃ©e
```

### Timeline EXPRESS

```
Jour 1 - 10h00
  â”‚ CLIENT commande
  â”‚ Status: NOUVELLE
  â”‚
Jour 1 - 14h00
  â”‚ APPELANT appelle
  â”‚ Client confirme + paie 10% (990 FCFA MTN)
  â”‚ APPELANT crÃ©e EXPRESS
  â”‚ Agence: Cotonou - Principale
  â”‚ Status: EXPRESS
  â”‚ Stock Normal: 50 â†’ 49
  â”‚ Stock EXPRESS: 0 â†’ 1
  â”‚
Jour 1 - 16h00
  â”‚ GESTIONNAIRE STOCK expÃ©die vers agence
  â”‚
Jour 2 - 10h00
  â”‚ Colis arrive en agence
  â”‚ GESTIONNAIRE marque "ArrivÃ©"
  â”‚ Status: EXPRESS_ARRIVE
  â”‚
Jour 2 - 11h00
  â”‚ APPELANT notifie client (WhatsApp)
  â”‚ clientNotifie: true
  â”‚
Jour 2 - 15h00
  â”‚ CLIENT vient en agence
  â”‚ CLIENT paie 90% (8910 FCFA Cash)
  â”‚ GESTIONNAIRE finalise
  â”‚ Status: EXPRESS_LIVRE
  â”‚ Stock EXPRESS: 1 â†’ 0
  â”‚ âœ… Transaction terminÃ©e
```

---

## ğŸ“± NOTIFICATIONS ET COMMUNICATIONS

### Notification WhatsApp EXPRESS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MESSAGE AUTOMATIQUE WHATSAPP        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¦ *Informations d'ExpÃ©dition*

âœ… *Commande :* CMD-12345
ğŸ‘¤ *Client :* Jean Dupont
ğŸ“ *TÃ©lÃ©phone :* 97123456
ğŸ“ *Destination :* Porto-Novo
ğŸ  *Adresse :* Quartier Zongo

ğŸ“¦ *Produit :* Gaine Minceur x1
ğŸ’° *Montant :* 9 900 FCFA
ğŸ”– *Code d'expÃ©dition :* EXP-2024-12345
âœ… *Statut :* ExpÃ©diÃ©e

ğŸ“… *Date d'expÃ©dition :* 17/12/2024

Merci de votre confiance ! ğŸ™
```

---

## ğŸ” SÃ‰CURITÃ‰ ET VALIDATIONS

### Flux d'Authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLIENT  â”‚                    â”‚ BACKEND â”‚
â”‚ (React) â”‚                    â”‚(Node.js)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                              â”‚
     â”‚ 1. Login                     â”‚
     â”‚ POST /api/auth/login         â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                              â”‚ 2. VÃ©rifie
     â”‚                              â”‚    credentials
     â”‚                              â”‚
     â”‚ 3. Token JWT                 â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                              â”‚
     â”‚ 4. Stocke dans              â”‚
     â”‚    localStorage              â”‚
     â”‚                              â”‚
     â”‚ 5. RequÃªte API              â”‚
     â”‚ Header: Authorization:       â”‚
     â”‚         Bearer <token>       â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                              â”‚ 6. VÃ©rifie token
     â”‚                              â”‚    + permissions
     â”‚                              â”‚
     â”‚ 7. RÃ©ponse                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

### Validation CrÃ©ation EXPÃ‰DITION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RequÃªte POST /expedition            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ AuthentifiÃ© ? â”‚â”€â”€â”€â”€> NON â”€â”€> 401 Unauthorized
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚RÃ´le autorisÃ© ?â”‚â”€â”€â”€â”€> NON â”€â”€> 403 Forbidden
      â”‚(ADMIN/GEST/   â”‚
      â”‚ APPELANT)     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Commande existeâ”‚â”€â”€â”€â”€> NON â”€â”€> 404 Not Found
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Status valide? â”‚â”€â”€â”€â”€> NON â”€â”€> 400 Bad Request
      â”‚(VALIDEE/      â”‚
      â”‚ A_APPELER)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Paiement 100%? â”‚â”€â”€â”€â”€> NON â”€â”€> 400 "Paiement incomplet"
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Stock dispo?   â”‚â”€â”€â”€â”€> NON â”€â”€> 400 "Stock insuffisant"
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ OUI
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  CrÃ©er        â”‚
      â”‚  EXPÃ‰DITION   â”‚
      â”‚  + RÃ©duire    â”‚
      â”‚  Stock        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚200 OK         â”‚
      â”‚+ Order object â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š DONNÃ‰ES ET REPORTING

### MÃ©triques ClÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          DASHBOARD STATISTIQUES              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EXPÃ‰DITIONS         â”‚  â”‚  EXPRESS             â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚  Total: 150          â”‚  â”‚  Total: 80           â”‚
â”‚  AssignÃ©es: 120      â”‚  â”‚  En cours: 30        â”‚
â”‚  ExpÃ©diÃ©es: 100      â”‚  â”‚  ArrivÃ©es: 25        â”‚
â”‚  En cours: 50        â”‚  â”‚  LivrÃ©es: 25         â”‚
â”‚                      â”‚  â”‚                      â”‚
â”‚  Montant: 1 485 000F â”‚  â”‚  Montant: 680 000F   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STOCK                                       â”‚
â”‚                                              â”‚
â”‚  Produit: Gaine Minceur Tourmaline          â”‚
â”‚  - Stock Normal: 45 unitÃ©s                   â”‚
â”‚  - Stock EXPRESS: 5 unitÃ©s                   â”‚
â”‚  - Total: 50 unitÃ©s                          â”‚
â”‚  - Seuil alerte: 10 unitÃ©s âœ…               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MOUVEMENTS RÃ‰CENTS                          â”‚
â”‚                                              â”‚
â”‚  17/12 15h30 - RESERVATION                   â”‚
â”‚  â†’ CMD-12345 - Gaine x1 - Stock: 46â†’45      â”‚
â”‚                                              â”‚
â”‚  17/12 14h20 - RESERVATION_EXPRESS           â”‚
â”‚  â†’ CMD-12344 - CrÃ¨me x1 - Stock: 47â†’46/0â†’1 â”‚
â”‚                                              â”‚
â”‚  17/12 10h00 - RETRAIT_EXPRESS               â”‚
â”‚  â†’ CMD-12300 - Gaine x1 - Express: 6â†’5      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ POINTS DE DÃ‰CISION MÃ‰TIER

### Quand utiliser EXPÃ‰DITION vs EXPRESS ?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT DANS VILLE Ã‰LOIGNÃ‰E           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Client peut    â”‚
      â”‚ payer 100%     â”‚
      â”‚ maintenant ?   â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
          â”‚        â”‚
      OUI â”‚        â”‚ NON
          â”‚        â”‚
          â–¼        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚EXPÃ‰DITION  â”‚  â”‚  EXPRESS   â”‚
  â”‚            â”‚  â”‚            â”‚
  â”‚Paie 100%   â”‚  â”‚Paie â‰¥10%   â”‚
  â”‚ExpÃ©diÃ©     â”‚  â”‚Retrait en  â”‚
  â”‚directement â”‚  â”‚agence      â”‚
  â”‚chez lui    â”‚  â”‚+ paie 90%  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gestion des Annulations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT VEUT ANNULER                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚Ã€ quel moment? â”‚
      â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
          â”‚        â”‚
    AVANT â”‚        â”‚ APRÃˆS
    EXPÃ‰  â”‚        â”‚ EXPÃ‰
          â”‚        â”‚
          â–¼        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Possible   â”‚  â”‚Impossible  â”‚
  â”‚            â”‚  â”‚            â”‚
  â”‚Admin       â”‚  â”‚Colis dÃ©jÃ   â”‚
  â”‚supprime    â”‚  â”‚envoyÃ©      â”‚
  â”‚            â”‚  â”‚            â”‚
  â”‚Stock +1    â”‚  â”‚NÃ©gocier    â”‚
  â”‚RETOUR      â”‚  â”‚retour      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ MAINTENANCE ET OPÃ‰RATIONS

### Nettoyage Automatique Photos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SYSTÃˆME DE NETTOYAGE AUTOMATIQUE      â”‚
â”‚        Photos reÃ§us d'expÃ©dition        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Chaque requÃªte GET /api/delivery/lists :

1. Parcourt toutes les commandes
2. VÃ©rifie photoRecuExpeditionUploadedAt
3. Si > 7 jours :
   â””â”€> photoRecuExpedition = null
   â””â”€> photoRecuExpeditionUploadedAt = null

Raison :
  âœ… Ã‰conomie espace base de donnÃ©es
  âœ… Photos base64 volumineuses
  âœ… AprÃ¨s 7 jours, photo plus nÃ©cessaire
```

### RÃ©conciliation Stock

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      AUDIT QUOTIDIEN DU STOCK           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Compter Stock Physique
   â””â”€> Stock Normal rÃ©el : X
   â””â”€> Stock EXPRESS rÃ©el : Y

2. Comparer avec Stock SystÃ¨me
   â””â”€> Stock Normal systÃ¨me : A
   â””â”€> Stock EXPRESS systÃ¨me : B

3. Si Ã©cart :
   â””â”€> CrÃ©er mouvement CORRECTION
   â””â”€> QuantitÃ© : X - A (ou Y - B)
   â””â”€> Motif : "Audit quotidien - Ã‰cart de Z unitÃ©s"
```

---

## ğŸ“ CHECKLIST OPÃ‰RATIONNELLE

### Appelant - Traiter une EXPÃ‰DITION

- [ ] Appeler le client
- [ ] Confirmer produit et quantitÃ©
- [ ] Expliquer le mode d'expÃ©dition
- [ ] Recevoir paiement 100% (Orange/MTN/Moov/Wave)
- [ ] Noter rÃ©fÃ©rence transaction
- [ ] CrÃ©er EXPÃ‰DITION dans le systÃ¨me
- [ ] VÃ©rifier que stock a diminuÃ©
- [ ] Informer le client du dÃ©lai

### Gestionnaire - Assigner Livreur

- [ ] VÃ©rifier commandes EXPÃ‰DITION en attente
- [ ] Identifier la ville de destination
- [ ] Choisir livreur disponible
- [ ] Assigner dans le systÃ¨me
- [ ] Informer gestionnaire de stock
- [ ] Informer le livreur

### Gestionnaire Stock - PrÃ©parer Colis

- [ ] VÃ©rifier expÃ©ditions assignÃ©es du jour
- [ ] Noter livreur assignÃ© pour chaque colis
- [ ] PrÃ©parer le colis (produit + emballage)
- [ ] Ã‰tiqueter : Nom client + Ville + TÃ©lÃ©phone
- [ ] Contacter le livreur
- [ ] Remettre le colis au livreur
- [ ] Faire signer bordereau de remise

### Livreur - ExpÃ©dier

- [ ] RÃ©cupÃ©rer colis du gestionnaire de stock
- [ ] VÃ©rifier Ã©tiquette et contenu
- [ ] Se rendre Ã  l'agence de transport
- [ ] ExpÃ©dier le colis
- [ ] Obtenir code d'expÃ©dition
- [ ] Prendre photo du reÃ§u
- [ ] Confirmer dans le systÃ¨me
- [ ] Uploader photo et code

---

*Document crÃ©Ã© le 17 dÃ©cembre 2024*
*Version 1.0 - Diagrammes et flux du systÃ¨me d'expÃ©dition*
